<!--
BSD 2-Clause License

Copyright (c) 2017, The HeadphoneCheck Authors (see AUTHORS)
All rights reserved.

Contact Ray Gonzalez raygon@mit.edu or Kevin J. P. Woods kwoods@mit.edu
=======================================================================
-->
<!DOCTYPE html>
<html>
  <head>
    <!-- Import jQuery from Google CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Import HeadphoneCheck.js (minified) from McDermott S3 server -->
    <script type="text/javascript" src="https://s3.amazonaws.com/mcd-headphone-check/v1.0/src/HeadphoneCheck.min.js"></script>
    <!-- Import HeadphoneCheck.css from McDermott S3 server -->
    <!-- <link rel="stylesheet" type="text/css" href="https://s3.amazonaws.com/mcd-headphone-check/v1.0/src/HeadphoneCheckStyle.css"> -->
    <style type="text/css">
      body{
        margin:auto;
        margin-top: 100px;
        border: 10px black solid;
        font-size: 20px;
        display: flex;
        max-width: 60%;
        padding:30px;
        justify-content: center;
        align-self: flex-start;
      }
    </style>
  </head>
  <script>
    // Bind callback to hcHeadphoneCheckEnd event
    $(document).on('hcHeadphoneCheckEnd', function(event, data) {
      var results = data.data;
      var config = data.config;
      var didPass = data.didPass;
      if (didPass) {
        window.location.href = '/templates/question/question.html';
        // do ajax here to send information to the front end
      }
      else {
        $('<div/>', {
          html: 'Screening task failed.<br/>totalCorrect: ' + results.totalCorrect
        }).appendTo($('body'));
      }
    });
  </script>
  <!-- Run the headphone check when the page finishes loading -->
  <body onload="HeadphoneCheck.runHeadphoneCheck();">
    <div id="hc-container"></div>
  </body>
</html>
